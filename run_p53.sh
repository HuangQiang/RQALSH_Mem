#!/bin/bash
make
make clean

# ------------------------------------------------------------------------------
#  Parameters
# ------------------------------------------------------------------------------
dname=P53
n=30159
d=5408
qn=1000
c=2.0
dPath=data/${dname}/${dname}
oPath=results${c}/${dname}/

# ------------------------------------------------------------------------------
#  Ground Truth 
# ------------------------------------------------------------------------------
./rqalsh -alg 0 -n ${n} -qn ${qn} -d ${d} -ds ${dPath}.ds -qs ${dPath}.q \
    -ts ${dPath}.fn${c}

# ------------------------------------------------------------------------------
#  ML_RQALSH
# ------------------------------------------------------------------------------
./rqalsh -alg 1 -n ${n} -qn ${qn} -d ${d} -c ${c} -ds ${dPath}.ds \
    -qs ${dPath}.q -ts ${dPath}.fn${c} -op ${oPath}

# ------------------------------------------------------------------------------
#  RQALSH*
# ------------------------------------------------------------------------------
L_list=(2 3 4 5 6 8 12) 
M_list=(12 8 6 5 4 3 2)
length=`expr ${#L_list[*]} - 1`

for j in $(seq 0 ${length})
do 
    L=${L_list[j]}
    M=${M_list[j]}

    ./rqalsh -alg 2 -n ${n} -qn ${qn} -d ${d} -L ${L} -M ${M} -c ${c} \
        -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.fn${c} -op ${oPath}
done

# ------------------------------------------------------------------------------
#  RQALSH
# ------------------------------------------------------------------------------
./rqalsh -alg 3 -n ${n} -qn ${qn} -d ${d} -c ${c} -ds ${dPath}.ds \
    -qs ${dPath}.q -ts ${dPath}.fn${c} -op ${oPath}

# ------------------------------------------------------------------------------
#  Drusilla Select
# ------------------------------------------------------------------------------
L_list=(2 3 4 5 6 8 12) 
M_list=(12 8 6 5 4 3 2)
length=`expr ${#L_list[*]} - 1`

for j in $(seq 0 ${length})
do 
    L=${L_list[j]}
    M=${M_list[j]}

    ./rqalsh -alg 4 -n ${n} -qn ${qn} -d ${d} -L ${L} -M ${M} -ds ${dPath}.ds \
        -qs ${dPath}.q -ts ${dPath}.fn${c} -op ${oPath}
done

# ------------------------------------------------------------------------------
#  QDAFN
# ------------------------------------------------------------------------------
./rqalsh -alg 5 -n ${n} -qn ${qn} -d ${d} -L 0 -M 0 -c ${c} \
    -ds ${dPath}.ds -qs ${dPath}.q -ts ${dPath}.fn${c} -op ${oPath}

# ------------------------------------------------------------------------------
#  Linear Scan
# ------------------------------------------------------------------------------
./rqalsh -alg 6 -n ${n} -qn ${qn} -d ${d} -ds ${dPath}.ds -qs ${dPath}.q \
    -ts ${dPath}.fn${c} -op ${oPath}
